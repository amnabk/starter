steps:
  - matrix:
      # This defines three separate runs
      - ENV_NAME: one
      - ENV_NAME: two
      - ENV_NAME: three
    label: ":test_tube: Testing %{ENV_NAME}"
    command: |
      echo -e "\033[36müîç Running tests for $ENV_NAME...\033[0m"

      if [ "$ENV_NAME" = "two" ]; then
        echo -e "\033[31m‚ùå Simulated failure in $ENV_NAME\033[0m"
        buildkite-agent annotate "‚ùå Failed in <b>$ENV_NAME</b>" --style "error" --context "$ENV_NAME"
        exit 1
      else
        echo -e "\033[32m‚úÖ Success in $ENV_NAME\033[0m"
        buildkite-agent annotate "‚úÖ Passed in <b>$ENV_NAME</b>" --style "success" --context "$ENV_NAME"
      fi
